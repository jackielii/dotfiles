#!/usr/bin/env fish

set -l tmp_file (mktemp)
trap "rm -f $tmp_file" EXIT

while read line
    echo $line >>$tmp_file
end

set -l load_words "split-words $tmp_file"

sh -c "$load_words ' '" | fzf \
    --tac \
    --bind "ctrl-space:reload($load_words ' ')" \
    --bind "ctrl-/:reload($load_words '-')" \
    --bind "tab:execute-silent(echo -n {} | pbcopy)+abort" \
    --bind "enter:execute-silent(kitty @ send-text --match state:overlay_parent {})+abort" \
    --header 'Tab: copy to clipboard; Enter: send to terminal; ctrl-space: split by space; ctrl-/: to split by /'
    
